---
layout: post
title: "커스텀 URL을 지정하는법"
date: 2020-12-15 10:09:01 +0900
comment: true
---

*"수업시간에 다루어지지 않은 기능을 추가하고 이를 추가하는 과정을 Post로 작성"* 과제를 위해 작성하는 글입니다.
[quartzsaber.github.io]로 접근하면 이 주소로 리다이렉트되는 것을 확인할 수 있는데, 그건 리다이렉트 코드를 넣은게 아니라 커스텀 도메인을 넣으면 원래 그렇게 됩니다.
혹시 채점을 위해 이 기능을 끄기를 원하신다면 하단에 있는 메일로 연락주세요.
주로 24시간 내로 확인하며, 이 기능을 끄는 과정에서 커밋이 하나 생깁니다.

GitHub Pages는 커스텀 URL을 지정하고 HTTPS를 적용하는 것을 지원합니다.
도메인이 github.io가 아니라 내 개인 도메인이라면 그만큼 더 깔끔해 보이겠죠?
이 글에서는 그것을 하는 법을 알아보겠습니다.

## 도메인 구하기

우선은 도메인을 구해야 합니다.

freenom같은 곳에서 무료 도메인을 얻을수도 있고, 아니면 호스팅 업체에서 하나 사도 괜찮습니다.
저는 minary.co.kr 도메인을 소유하고 있기 때문에 이 도메인을 한번 이용해 보겠습니다.

## CNAME 설정하기

example.com 같은 apex 도메인은 A/AAAA 레코드를 이용해야 합니다.
하지만 www.exmaple.com 이나 지금 사용중인 blog.minary.co.kr 같은 서브도메인은 CNAME 세팅을 사용할 수 있습니다.

세팅하는 법은 간단합니다.

레코드 타입은 CNAME이고 이름은 www나 blog같은 이름입니다.
대상은 `(username).github.io`로 해주세요.

참고로 CNAME Flattening을 지원하는 DNS 호스팅 업체를 이용중이라면 apex 도메인도 CNAME을 사용할 수 있습니다.
제가 상용중인 Cloudflare는 이를 지원합니다.
기본값은 루트에서 CNAME Flattening인데, 이것만 사용해도 apex 도메인에서 CNAME을 이용하는데는 지장이 없습니다.
아마 Pro 플랜을 가입하면 다른 옵션을 선택할 수 있을겁니다.

## GitHub 설정 바꾸기

깃허브에서 레포지토리 설정으로 들어가서 Pages 탭을 누릅니다.

Custom domain 항목에 아까 사용한 도메인 (`blog.example.com` 등)을 넣고 Save를 눌러주세요.

잠시 기다리면 (최대 24시간) 이제 해당 주소로 깃허브 페이지를 접근할 수 있습니다.

거기서 조금 더 기다리면 (최대 24시간) 그 아래의 Enforce HTTPS가 활성화되는데, 이걸 체크하면 HTTPS 연결이 활성화됩니다.
참고로 인증서는 Let's Encrypt 제공입니다.
